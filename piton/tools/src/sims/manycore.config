// Modified by Barcelona Supercomputing Center on March 3rd, 2022
// Modified by Princeton University on June 9th, 2015
// ========== Copyright Header Begin ==========================================
//
// OpenSPARC T1 Processor File: manycore.config
// Copyright (c) 2006 Sun Microsystems, Inc.  All Rights Reserved.
// DO NOT ALTER OR REMOVE COPYRIGHT NOTICES.
//
// The above named program is free software; you can redistribute it and/or
// modify it under the terms of the GNU General Public
// License version 2 as published by the Free Software Foundation.
//
// The above named program is distributed in the hope that it will be
// useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
// General Public License for more details.
//
// You should have received a copy of the GNU General Public
// License along with this work; if not, write to the Free Software
// Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA.
//
// ========== Copyright Header End ============================================
// 1 core without I/O testbench config file for sims

<manycore>
    -model=manycore
#ifdef UVM_TB
    -toplevel=testbench
#else
    -toplevel=cmp_top
#endif
    -flist=$DV_ROOT/design/include/Flist.include
    -flist=$DV_ROOT/design/common/rtl/Flist.common
    -flist=$DV_ROOT/design/chipset/include/Flist.include
    -flist=$DV_ROOT/design/rtl/Flist.system
    -flist=$DV_ROOT/design/chip/rtl/Flist.chip
    -flist=$DV_ROOT/design/chip/pll/rtl/Flist.pll
    -flist=$DV_ROOT/design/chip/jtag/rtl/Flist.jtag
    -flist=$DV_ROOT/design/chip/tile/rtl/Flist.tile
    -flist=$DV_ROOT/design/chip/tile/rtap/rtl/Flist.rtap
    -flist=$DV_ROOT/design/chip/tile/l15/rtl/Flist.l15
#ifdef FLIST_PICO
    -flist=$DV_ROOT/design/chip/tile/pico/rtl/Flist.pico
    -rv32
    -config_rtl=PITON_PICO
#endif
#ifdef FLIST_OST1
    -flist=$DV_ROOT/design/chip/tile/fpu/rtl/Flist.fpu
    -flist=$DV_ROOT/design/chip/tile/sparc/rtl/Flist.sparc_top
    -flist=$DV_ROOT/design/chip/tile/sparc/ifu/rtl/Flist.ifu
    -flist=$DV_ROOT/design/chip/tile/sparc/lsu/rtl/Flist.lsu
    -flist=$DV_ROOT/design/chip/tile/sparc/tlu/rtl/Flist.tlu
    -flist=$DV_ROOT/design/chip/tile/sparc/spu/rtl/Flist.spu
    -flist=$DV_ROOT/design/chip/tile/sparc/ffu/rtl/Flist.ffu
    -flist=$DV_ROOT/design/chip/tile/sparc/exu/rtl/Flist.exu
    -flist=$DV_ROOT/design/chip/tile/sparc/exu/bw_r_irf/rtl/Flist.bw_r_irf
    -flist=$DV_ROOT/design/chip/tile/sparc/exu/bw_r_irf/common/rtl/Flist.bw_r_irf_common
    -flist=$DV_ROOT/design/chip/tile/sparc/exu/bw_r_irf/bw_r_irf_register8/rtl/Flist.bw_r_irf_register8
    -flist=$DV_ROOT/design/chip/tile/sparc/exu/bw_r_irf/bw_r_irf_register16/rtl/Flist.bw_r_irf_register16
    -flist=$DV_ROOT/design/chip/tile/sparc/mul/rtl/Flist.mul
    -flist=$DV_ROOT/design/chip/tile/sparc/srams/rtl/Flist.srams
    -flist=$DV_ROOT/design/chip/tile/sparc/rtl/Flist.sparc_common
    //-sparcv9
    -config_rtl=PITON_OST1
#endif
#ifdef FLIST_ARIANE
    -flist=$DV_ROOT/design/chip/tile/ariane/Flist.ariane
    -flist=$DV_ROOT/design/chipset/rv64_platform/Flist.rv64_platform
    -vcs_build_args="-sverilog +systemverilogext+.sv -ntb_opts uvm-1.1 +vpi"
    -vcs_build_args=-timescale=1ps/1ps
    -rv64
    -rv64_platform
    -config_rtl=PITON_ARIANE
    -config_rtl=PITON_RV64_PLATFORM
    -config_rtl=PITON_RV64_DEBUGUNIT
    -config_rtl=PITON_RV64_CLINT
    -config_rtl=PITON_RV64_PLIC
    -config_rtl=WT_DCACHE
    // suppressing error in Questa: piton/design/chip/tile/ariane/src/scoreboard.sv(356): (vopt-8386) Illegal assignment to type 'enum reg[3:0] ' from type 'bit signed[31:0]': An enum variable may only be assigned the same enum typed variable or one of its values
    -msm_build_args=-suppress 8386
#endif
#ifdef FLIST_COVERAGE
    -flist=$DV_ROOT/verif/env/manycore/cosim_cov_lagarto.flist
#endif
#ifdef FLIST_LAGARTO
    -flist=$DV_ROOT/design/chip/tile/vas_tile_core/Flist.lagarto
    -flist=$DV_ROOT/design/chipset/rv64_platform/Flist.rv64_platform
    -vcs_build_args="-sverilog +systemverilogext+.sv -ntb_opts uvm-1.1 +vpi"
    -vcs_build_args=-timescale=1ps/1ps
    -rv64
    -rv64_platform
    -config_rtl=PITON_LAGARTO
    -config_rtl=PITON_RV64_PLATFORM
    -config_rtl=PITON_RV64_DEBUGUNIT
    -config_rtl=PITON_RV64_CLINT
    -config_rtl=PITON_RV64_PLIC
    -config_rtl=WT_DCACHE
    // suppressing error in Questa: (vlog-2388) 'overflow' already declared in this scope (exe_stage) at /piton/design/chip/tile/vas_tile_core/./modules/drac-inorder/rtl/datapath/rtl/exe_stage/rtl/exe_stage.sv(130).
    -msm_build_args=-suppress 2388
#endif
#ifdef FLIST_XBAR
    -flist=$DV_ROOT/design/chip/tile/vas_tile_core/Flist.xbar
#endif
#ifdef FLIST_SA_HEVC
    -flist=$DV_ROOT/design/chip/tile/vas_tile_core/modules/sa-shell_sa-hevc/Flist.sa_hevc
#endif
#ifdef FLIST_SA_NN
    -flist=$DV_ROOT/design/chip/tile/vas_tile_core/modules/sa-shell_sa-hevc/Flist.sa_nn
#endif
#ifdef FLIST_SA
    -flist=$DV_ROOT/design/chip/tile/vas_tile_core/modules/sa-shell_sa-hevc/Flist.sa
#endif
#ifdef FLIST_VPU
    -flist=$DV_ROOT/design/chip/tile/vas_tile_core/modules/meep-vpu/Flist.vpu
#endif
#ifdef FLIST_MEMTILE
    -flist=$DV_ROOT/verif/env/fake_axi4_mem/memtile.flist
#endif
#ifdef FLIST_PRONOC
    -flist=$DV_ROOT/design/chip/tile/noc/Flist.pronoc
#endif
    -flist=$DV_ROOT/design/chip/tile/common/rtl/Flist.clib_common
    -flist=$DV_ROOT/design/chip/tile/common/rtl/Flist.dlib_common
    -flist=$DV_ROOT/design/chip/tile/common/rtl/Flist.dft_common
    -flist=$DV_ROOT/design/chip/tile/common/rtl/Flist.ucb_common
    -flist=$DV_ROOT/design/chip/tile/common/rtl/Flist.sw_mem_common
    -flist=$DV_ROOT/design/chip/tile/common/rtl/Flist.network_common
    -flist=$DV_ROOT/design/chip/tile/common/srams/rtl/Flist.srams_common
    // dmbr
    -flist=$DV_ROOT/design/chip/tile/dmbr/rtl/Flist.dmbr
    // dynamic network
    -flist=$DV_ROOT/design/chip/tile/dynamic_node/rtl/Flist.dynamic_node
    -flist=$DV_ROOT/design/chip/tile/dynamic_node/common/rtl/Flist.common
    -flist=$DV_ROOT/design/chip/tile/dynamic_node/components/rtl/Flist.components
    -flist=$DV_ROOT/design/chip/tile/dynamic_node/dynamic/rtl/Flist.dynamic
    -flist=$DV_ROOT/design/chip/tile/dynamic_node/sim/rtl/Flist.sim
    // l2
    -flist=$DV_ROOT/design/chip/tile/l2/rtl/Flist.l2
    -flist=$DV_ROOT/design/chipset/rtl/Flist.chipset
    -flist=$DV_ROOT/design/common/fpga_bridge/rtl/Flist.fpga_bridge
    -flist=$DV_ROOT/design/common/fpga_bridge/fpga_send/rtl/Flist.fpga_send
    -flist=$DV_ROOT/design/common/fpga_bridge/fpga_rcv/rtl/Flist.fpga_rcv
    -flist=$DV_ROOT/design/chip/chip_bridge/rtl/Flist.chip_bridge
    -flist=$DV_ROOT/verif/env/manycore/manycore.flist
    -flist=$DV_ROOT/verif/env/common/fake_mem_ctrl.flist
    -flist=$DV_ROOT/design/chipset/noc_axilite_bridge/rtl/Flist.noc_axilite_bridge
    -flist=$DV_ROOT/design/chipset/io_xbar/rtl/Flist.io_xbar
    -flist=$DV_ROOT/design/chipset/io_xbar/common/rtl/Flist.common
    -flist=$DV_ROOT/design/chipset/io_xbar/dynamic/rtl/Flist.dynamic
    -flist=$DV_ROOT/design/chipset/io_xbar/components/rtl/Flist.components
    -flist=$DV_ROOT/design/chipset/io_ctrl/rtl/Flist.io_ctrl
    //axi_lite_slave_rf
    -flist=$DV_ROOT/design/chipset/axi_lite_slave_rf/rtl/Flist.axi_lite_slave_rf
#ifdef FLIST_ORAM
    -flist=$DV_ROOT/design/chip/tinyoram/rtl/Flist.oram
    -config_rtl=ORAM_ON"
    -sim_run_args=+oram"
#endif
#ifdef ALVEO280
    -vcs_build_args=-y $DV_ROOT/design/chipset/io_ctrl/rtl/
    -vcs_build_args=-y $DV_ROOT/design/chipset/mc/rtl/ +libext+.sv
    -vcs_build_args=-y $DV_ROOT/design/chipset/noc_axi4_bridge/rtl/
    -sim_build_args=+incdir+$DV_ROOT/design/chipset/noc_axi4_bridge/rtl/
    -sim_build_args=+define+PITON_NONCACH_MEM
    -sim_build_args=+define+PITONSYS_IOCTRL
    -sim_build_args=+define+PITONSYS_UART
    -sim_build_args=+define+PITON_UART16550
    -sim_build_args=+define+PITON_FPGA_MC_SIM
#ifdef UART_BOOT
    -vcs_build_args=-y $DV_ROOT/design/chipset/rtl/
    -sim_build_args=+define+PITONSYS_UART_BOOT
#endif
#ifdef ETH_CORE
    -sim_build_args=+define+PITON_FPGA_ETH
#endif
#ifdef HBM_DEF
    -sim_build_args=+define+PITON_FPGA_MC_HBM
#endif
#endif

    // No scan chains
    -config_rtl=NO_SCAN

    -config_l1i_size=16384       // default
    -config_l1i_associativity=4     // default

    -config_l1d_size=8192           // default
    -config_l1d_associativity=4     // default

    -config_l15_size=8192           // default
    -config_l15_associativity=4     // default

    -config_l2_size=65536           // default
    -config_l2_associativity=4      // default

    -vlt_build_args=-DSYNC_MUX

    -rtl_timeout=5000000
    -sim_run_args=+spc_pipe=0
    -sim_run_args=+doerrorfinish
    -sim_run_args=+dowarningfinish
    -vcs_build_args=+nospecify
    -vcs_build_args=-Xstrict=1 -notice
    -metro_mpi_build_args="-CFLAGS -I$DV_ROOT/tools/pli/iop"

    -vcs_build_args=-P $DV_ROOT/tools/pli/iop/bwioj.tab // needed for fake_l2
    -vcs_build_args=-P $DV_ROOT/tools/pli/socket/bwsocket_pli.tab
    -vcs_build_args=-P $DV_ROOT/tools/pli/mem/bwmem_pli.tab
    -vcs_build_args=-lsocket_pli -liob -lmem_pli
    -vcs_build_args=+rad
    -post_process_cmd="regreport -1 > status.log"
    -post_process_cmd="perf > perf.log"
#ifdef UVM_TB 
    //-asm_diag_root=$DV_ROOT/verif/diag
    //-sjm_diag_root=$DV_ROOT/verif/diag
    //-image_diag_root=$DV_ROOT/verif/diag
#else
    -asm_diag_root=$DV_ROOT/verif/diag
    -image_diag_root=$DV_ROOT/verif/diag
#endif
    -midas_args=-mmu=niagara
    -sim_run_args=+wait_cycle_to_kill=10
    -vcs_cm_args=line+tgl+cond+branch+fsm
</manycore>
